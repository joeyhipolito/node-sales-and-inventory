<header class="content__page-title">
  <div class="media media--center page-title__block left">
    <span class="media__fig white icon--text media__icon grey ion-ios7-albums"></span>
    <h2 class="blue-grey small upper mold">Purchase Orders</h2>
  </div>
  <div class="right">
    <a ng-href="#/purchase_order/create" class="button blue-grey--dark media media--center smallest right">
      <span class="ion-plus media__icon button__icon white media__fig"></span>
      <span class="upper bold white media__bd">Create Purchase Order</span>
    </a>
  </div>
</header>

<div class="content__container">
  <div class="content__block content__block--transparent">
    <ul class="list">
      <li class="list__card list__card--padded media media--center row" ng-repeat="po in purchaseOrders">
        <span class="media__fig ion-paperclip media__icon log__icon grey small card__item--horizontal__icon"></span>
        <p class="upper smallest bold aligner col-2 card__item--horizontal">
          <span class="tag"
          ng-class="{pending : 'green', draft : 'grey', complete : 'blue', incomplete : 'red'}[po.status]">
          {{po.status}}
          </span>
        </p>
        <div class="col-3 card__item--horizontal">
          <p class="upper thin xxs">Tracking ID</p>
          <p class="bold smallest">{{po.tracking_id}}</p>
        </div>
        <div class="col-3 card__item--horizontal">
          <p class="upper thin xxs">Supplier</p>
          <p class="upper smallest bold truncate">{{po.supplier}}</p>
        </div>
        <div class="col-3 card__item--horizontal">
          <p class="upper thin xxs">Date Issued</p>
          <p class="upper smallest bold"> {{po.date_issued}} </p>
        </div>
        <div class="col-3 card__item--horizontal">
          <p class="upper thin xxs">Last Updated</p>
          <p class="upper smallest bold">{{po.date_last_updated}}</p>
        </div>
        <a ng-href="#/purchase_order/{{po.id}}" class="media media--center icon__group--links smallest">
          <span class="ion-ios7-gear media__icon button__icon small"></span>
          <span class="upper bold">View</span>
        </a>
      </li>
      
    </ul>
  </div>
</div>

<script type="text/ng-template" id="purchase_order.create.html">
  <header class="content__page-title pure-g">
    <div class="media media--center page-title__block pure-u-4-5">
      <span class="media__fig white icon--text media__icon grey ion-ios7-albums"></span>
      <h2 class="blue-grey small upper mold">Create a Purchase Order</h2>
    </div>
  </header>

  <div class="content__container">
    <div class="content__block overflow-x--hidden">
      <div class="step__items  bold smallest upper">
        <a ui-sref-active="active" ui-sref=".suppliers_list" class="step__item dark-grey"><span class="step__item__number white">1</span> Supplier</a>
        <a ui-sref-active="active" ui-sref=".verify" class="step__item dark-grey"><span class="step__item__number white">2</span> Verify &amp; Save</a>
        <a ui-sref-active="active" ui-sref=".order" class="step__item dark-grey"><span class="step__item__number white">3</span> Add Items</a>
      </div>
      <div class="form__view" ui-view></div>
    </div>
  </div>
</script>

<script type="text/ng-template" id="purchase_order.create.suppliers_list.html">
  <header class="content__block__title">
    <h5 class="bold grey--darker upper">Select a supplier that you would like to purchase to.</h5>
  </header>
  <div class="list row">
    <div class="list__item--horizontal card__wrapper pcol-1-3" ng-repeat="supplier in suppliers">
      <div class="list__card  list__card--padded media media--center row" ng-class="{'supplier--selected' : $parent.supplier.id == supplier.id}">
        <div class="media__bd">
          <a ng-href="" ng-click="setSupplier(supplier)" ui-sref="purchaseOrder.create.verify">
            <p class="upper media media--center">
              <span class="media__fig media__icon detail__icon ion-ios7-world-outline blue-grey"></span>
              <span class="bold upper  blue-grey smallest">{{supplier.name}}</span>
            </p>
            <p class="upper media media--center">
              <span class="media__fig media__icon detail__icon ion-ios7-location-outline blue-grey"></span>
              <span class="media__bd xxs blue-grey">{{supplier.address}}</span>
            </p>
            <p class="upper media media--center">
              <span class="media__fig media__icon detail__icon ion-ios7-telephone-outline blue-grey"></span>
              <span class="media__bd xxs blue-grey">{{supplier.contact_number}}</span>
            </p></a>
        </div>
      </div>
    </div>
  </div>

</script>
<script type="text/ng-template" id="purchase_order.create.verify_supplier.html">
  <header class="content__block__title">
    <h5 class="bold grey--darker upper">Verify action</h5>
  </header>
  <div ng-hide="!isEmpty(purchaseOrder)">
    <p class="validation-message warning xxs bold">Please select a supplier.</p>
  </div>
  <div ng-show="!isEmpty(purchaseOrder)">
    <p class="validation-message info bold">Are you sure you want to issue a purchase order to:</p>
    <div class="list__card  list__card--padded media media--center  pcol-1-2">
      <div class="media__bd">
        <p class="upper media media--center">
          <span class="media__fig media__icon detail__icon ion-ios7-world-outline blue-grey"></span>
          <span class="bold upper  blue-grey smallest">{{supplier.name}}</span>
        </p>
        <p class="upper media media--center">
          <span class="media__fig media__icon detail__icon ion-ios7-location-outline blue-grey"></span>
          <span class="media__bd xxs blue-grey">{{supplier.address}}</span>
        </p>
        <p class="upper media media--center">
          <span class="media__fig media__icon detail__icon ion-ios7-telephone-outline blue-grey"></span>
          <span class="media__bd xxs blue-grey">{{supplier.contact_number}}</span>
        </p>
      </div>
    </div>
    
    <a  ui-sref="purchaseOrder.create.order" class="button green media media--center right" ng-click="purchaseOrderCreate()">
      <span class="ion-ios7-checkmark-empty media__icon button__icon small white"></span>
      <span class="media__bd upper bold white smallest">Create Purchase Order</span>
    </a>
  </div>
</script>

<script type="text/ng-template" id="purchase_order.create.issue_order.html">
  <div class="row">
    <div class="content__block--noborder col-1">
      <header class="content__block__title">
        <h5 class="bold grey--darker upper">What items would you like to order?</h5>
      </header>
      
      <form ng-submit="orderCreate()" action="" novalidate>
        <div class="media media--center input__block input--outline grey">
          <span class="ion-ios7-cart-outline media__fig input__icon small grey--darker"></span>
          <input class="media__bd dark grey--darker" type="text" ng-model="order.product_name" placeholder="Enter product name here">
        </div>
        <div class="media media--center input__block input--outline grey">
          <span class="ion-ios7-more-outline media__fig input__icon small grey--darker"></span>
          <input class="media__bd dark grey--darker" type="number" ng-model="order.quantity_ordered" placeholder="Enter amount">
        </div>
        <a ng-click="orderCreate()" class="media media--center button button--outline right">
          <figure class="media__fig button__icon small">
            <span class="ion-ios7-checkmark-empty grey--darker"></span>
          </figure>
          <div class="media__bd button__text grey--darker">Order</div>
        </a>
        <input class="hidden" type="submit"></input>
      </form>
    </div>
    
    <div class="content__block--noborder col-2">
      <div ng-show="orders.length > 0">
        <header class="content__block__title">
          <h5 class="bold grey--darker upper">Items currently in purchase order</h5>
        </header>
        <ul class="order__list">
          <li class="order__item tag white media media--center" ng-repeat="order in orders">
            <span class="media__fig ion-cube detail__icon grey"></span>
            <span class="smallest upper">&nbsp;{{order.product_name}} ({{order.quantity_ordered}})</span>
            <a href="" ng-click="orderDelete($index)">
              <span class="hint--top" data-hint="Delete this product"><span class="media__fig ion-close detail__icon red"></span></span>
            </a>
          </li>
        </ul>
        <div class="clearfix"></div>
        <a class="button green media media--center right" ng-click="purchaseOrderIssue()">
          <span class="ion-ios7-checkmark-empty media__icon button__icon small white"></span>
          <span class="media__bd upper bold white smallest">Issue Purchase Order</span>
        </a>
      </div>
    </div>
  </div>
</script>